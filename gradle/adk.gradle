def adkPath = gradle.includedBuilds.collect { it.projectDir } + [ System.getenv("AXELOR_HOME") ]
def adkHome = adkPath.find { file("${it}/gradle/repo.gradle").exists() }
if (adkHome == null) {
	throw new GradleException("AXELOR_HOME is not set properly")
}

ext.adkPlugins = {
	def libs = file("${adkHome}/gradle/libs")
	return libs.exists() ? fileTree(dir: libs.path, include: '*.jar') : "com.axelor:axelor-gradle:*"
}

allprojects {

	apply from: "${adkHome}/gradle/repo.gradle"
	apply from: "${adkHome}/gradle/libs.gradle"
	apply from: "${adkHome}/gradle/common.gradle"
	apply from: "${adkHome}/gradle/eclipse.gradle"
	apply from: "${adkHome}/gradle/license.gradle"

	repositories adkRepos
}
